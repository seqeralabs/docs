---
title: Seqera Enterprise v24.2_major
date: 2024-12-10
tags: [seqera enterprise]
---

Seqera Enterprise version 24.2 introduces a number of new features to Data Studios, the addition of the global Nextflow config, as well as a number of bug fixes and performance enhancements.

## New features and improvements

### Nextflow

  - Add global Nextflow config: ability to define the Nextflow config in the CE as a "global" configuration. The configuration defined in the pipeline config and at launch level, can override the one defined in the CE config.
  - global nextflow config and managed identity client ID copy fixes (#7495)

### Launchpad

- New Launch Form is enabled by default. If you've activated the new launch form already using the environment variable `TOWER_STEPPED_LAUNCH_FORM_ALLOWED_WORKSPACES`, nothing will change. If you have not yet activated it, it will show by default. You can disable this per workspace, or across your entire deployment (empty, null, comma-separated). When `null` (undefined) ->  no workspaces are enabled, when empty -> all are enabled
- Implement custom launch container logic (#7298) (probably not needed...let's check on  this)
- Improve error message on launchpad if the branch is missing (#7772)
- adds tags propagation to launch template (#7429)

### Runs

- N/A

### Datasets

- N/A

### Data Explorer 

- Add direct Data Explorer browse link to mounted data items, so that I can easily inspect the data used in a session.

### Data Studios
 
 - Data Studios custom environments
    - Create custom analysis environments or link to publicly/privately hosted ECR container. 
    - Custom environment build events are now added to the auditlog. This captures custom environment builds in the audit log to give you insight into how often, and which, custom environments are created. The events `data_studio_session_build_started` and `data_studio_session_build_failed` are added to the `tw_audit_log` table.
- Data Studios dashboard 
    -  New [dashboard](https://docs.seqera.io/platform/24.2/monitoring/dashboard#data-studios) provides information about Data Studios usage which can help you manage your resources.
  - Hybrid compute enviroments now supported in Data Studios.
    - Optionally define GPU allocation when creating a Data Studios session.
  - NVMe support added.

### Compute Environments

- AWS Forge support has been added for Amazon Linux 2023. Previously AWS Forge was only able to create CE that was compatible with AL2. Seqera now supports Amazon Linux 2023 - and if you specify an AMI ID then it spins up the right one. This does not change the defaults. It's not possible to specify as an image in the Forge setup.
- Google Life Sciences API deprecation notice has been added to the to Seqera Platform UI. The Google Life Sciences API will be deprecated in June 2025.

### Credentials 

- Azure Batch service principal creds and managed identities prevents spillover of credentials, and config needs to be done. 
- Remove required validator from GitLab credentials password field.

### Secrets

- N/A

### Participants 

- N/A

### Settings

- Added flexibility for pipeline names in workspaces. This change forces name uniqueness at the workspace level for private workspaces while keeping the uniqueness at the organization level for shared workspaces.

### User/authentication

- N/A

### General

- Platform Progress store using Jedis in place of Redisson library. 
- Use Jedis in place of Redisson in `DistributedMailService`.
- Refactor reports file streaming over Agent connections directly to the browser.
- JSON schema draft 2020-12 features inside parameters input form support. Includes: Nested parameters, "anyOf", "allOf", and "oneOf" input form validation support, "dependantSchemas" initial support, and "if-then-else" support.
- Increase ECS agent config setting to tune the timeout for several container actions
   - `ECS_CONTAINER_CREATE_TIMEOUT=10m`: Timeout for creating a container.
   - `ECS_CONTAINER_STOP_TIMEOUT=10m`: Timeout for stopping a container. Increase to prevent Nextflow from being forcibly killed and leave running jobs.
   - `ECS_MANIFEST_PULL_TIMEOUT=10m`: Timeout for pulling a container manifest. This may be needed when pulling a Wave container with a long build time.
- Disable AWS and Google Batch spot auto retry: This disables the automatic retry of Batch jobs submitted by Nextflow if favour of using classic Nextflow retry mechanism. This is because the Batch automatic retry is completely transparent (invisble) to the Platform and end-user. Nextflow retry gives a better feedback and allows the user to have more control over it.
- Bump nf-launcher:j17-24.10.2 
- Upgrade to Angular 16
- Security fixes: All security fixes for previous versions


## Bug fixes

- Check if a workspace is disabled before fetching data links.
- Allow resume with compatible CE is broken when using agent and `$TW_AGENT_WORKDIR` as work dir. 
- Input form view not working for private GitHub repo using Quick Pipeline Launch.
- Workspace secrets are not being selected by default when doing Quicklaunch with new form.
- In new launch form users with "Maintain" role and lower can edit resource labels when launching.
- Fixes a problem with Entra and `javax.mail` transitive dependency.
- Shared pipelines without associated CE do not fallback to primary CE.
- Display initial mounted data when starting an existing Data Studio session.
- Adds the `managedIdentityId` to the response payload, when describing a compute environment.
- Send fetch schema request in `quicklaunchmode` even if revision is empty.
- Task tag search with underscore.
- Improve performance of query is reported as intensive on RDS database. Added index to `tw_workflow(complete)` column, which improves the performance of the query that finds workflows with missing progress. Added index to `tw_workflow(status`)` column conditionally; the index was already present in the `cloud.seqera.io` database, but not included among the database migration scripts.
- Avoid using master as fallback pipeline revision.
- Update `lastUsed` on compute environment when creating job for Data Studio session.
- Enable task `workDir` navigation using Data Explorer in the personal workspace.
- Allow changing the `workDir` when launching a pipeline.
- File name is not encoded when requesting download URL.
- Accessing reports of Nextflow CLI runs fails with `TOWER_CONTENT_URL` set.
- NF schema nested objects values are not preserved after going through input form. Removes processing of unsupported JSON schema types inside our pipeline input form components.
- Show CORS modal when detecting incorrect eTag configuration for Data Explorer and update link to Seqera docs.

## Breaking changes and warnings

From this version of Seqera Platform, `redisson.*` properties will be deprecated. If you have set `redisson.*` properties directly, do the following:

- Replace `/redisson/*` references for the AWS parameter store with `TOWER_REDIS_*`.
- Replace `redisson.*` references for the `tower.yml` with `TOWER_REDIS_*`. You can set `TOWER_REDIS_*` values directly in the YAML file (for example, `TOWER_REDIS_URL: redis://...`) in `tower.yml`.

## Upgrade steps 

1. This version includes an update to the Platform Enterprise H8 cache. **Do not start the upgrade while any pipelines are in a `running` state as active run data may be lost.**
1. This version requires a database schema update. Make a backup of your Platform database prior to upgrade.
1. If you are upgrading from a version older than 23.4.1, update your installation to version [23.4.4](https://docs.seqera.io/changelog/seqera-enterprise/v23.4_major) first, before updating to 24.2 with the steps below.
1. For recommended Platform memory settings, add the following environment variable to your Platform configuration values (`tower.env`, `configmap.yml`, etc.):
    ```bash 
    JAVA_OPTS: -Xms1000M -Xmx2000M -XX:MaxDirectMemorySize=800m -Dio.netty.maxDirectMemory=0 -Djdk.nio.maxCachedBufferSize=262144
    ```
1. See [Upgrade installation](https://docs.seqera.io/platform/24.2/enterprise/upgrade) for database backup and installation upgrade guidance.

:::info
Docker Compose deployments require downtime while upgrading services. Restarting the application may take several minutes. See [Docker compose deployment](https://docs.seqera.io/platform/24.2/enterprise/docker-compose) for more information.

For Kubernetes deployments, apply the 24.1 `tower-cron.yml` to your cron pod and wait for the cron pod to be running before applying the `tower-svc.yml` to your backend pod and restarting the service. If the cron pod update is interrupted, you may need to restore the instance from your DB backup and start again. See [Kubernetes deployment](https://docs.seqera.io/platform/24.2/enterprise/kubernetes) for more information. 

For custom deployments with third-party services such as ArgoCD, [contact support](https://support.seqera.io) for assistance during upgrade. 
::: 