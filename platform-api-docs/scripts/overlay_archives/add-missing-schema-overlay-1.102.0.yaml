overlay: 1.0.0
info:
  title: Add missing LocalComputeConfig schema
  version: 1.102.0
actions:
  # ===== ADD MISSING LocalComputeConfig SCHEMA =====

  # This schema exists in v1.95 base spec but was accidentally excluded from v1.95 decorated spec
  # We need to add it before other overlays can reference it

  - target: "$.components.schemas"
    update:
      LocalComputeConfig:
        type: object
        title: Local execution configuration
        properties:
          workDir:
            type: string
            description: "Compute environment working directory."
          preRunScript:
            type: string
            description: "Script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
          postRunScript:
            type: string
            description: "Script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
          environment:
            type: array
            description: "Array of environment variables for the compute environment."
            items:
              $ref: "#/components/schemas/ConfigEnvVariable"
          nextflowConfig:
            type: string
            description: "Additional Nextflow configuration content."
          discriminator:
            type: string
            description: "Property to select the compute config platform."
            readOnly: true
          waveEnabled:
            type: boolean
            description: "Enable Wave containers support. See [Wave containers](https://docs.seqera.io/platform-cloud/supported_software/wave)."
          fusion2Enabled:
            type: boolean
            description: "Enable Fusion v2 virtual distributed file system. See [Fusion file system](https://docs.seqera.io/platform-cloud/supported_software/fusion)."
