overlay: "1.0.0"
info:
  title: "Compute Environment Examples Enhancement"
  version: "1.0.0"
  description: "Adds comprehensive examples for creating compute environments across different cloud providers"

actions:
  # Add multiple provider examples to compute environment creation endpoint
  - target: "$.paths['/compute-envs'].post.requestBody.content['application/json']"
    update:
      examples:
        AwsBatchForge:
          description: "A minimal AWS Batch Forge compute environment with Wave and Fusion v2 enabled."
          value:
            computeEnv:
              name: "aws-batch-ce"
              platform: "aws-batch"
              credentialsId: "your-aws-credentials-id"
              description: "Minimal AWS Batch Forge compute environment with Wave, Fusion v2, and fast instance storage enabled"
              config:
                region: "eu-west-2"
                forge:
                  type: "SPOT"
                  minCpus: "0"
                  maxCpus: "100"
                workDir: "s3://your-bucket/work"
                waveEnabled: "true"
                fusion2Enabled: "true"
                nvnmeStorageEnabled: "true"
        
        AwsCloud:
          description: "Minimal AWS Cloud compute environment with default instance type and AMI"
          value:
            computeEnv:
              name: "aws-cloud-ce"
              description: "Minimal AWS Cloud compute environment with default instance type and AMI"
              platform: "aws-cloud"
              credentialsId: "your-aws-credentials-id"
              config:
                region: "eu-west-2"
                workDir: "s3://your-bucket/work"
        
        GoogleBatch:
          description: "Minimal Google Cloud Batch compute environment with Wave and Fusion enabled"
          value:
            computeEnv:
              name: "google-batch-ce"
              description: "Minimal Google Cloud Batch compute environment with Wave and Fusion enabled"
              platform: "google-batch"
              credentialsId: "your-google-credentials-id"
              config:
                location: "europe-west2"
                workDir: "gs://your-bucket/work"
                spot: true
                waveEnabled: true
                fusion2Enabled: true
        
        GoogleCloud:
          description: "Minimal Google Cloud compute environment with default instance type and image ID"
          value:
            computeEnv:
              name: "google-cloud-ce"
              description: "Minimal Google Cloud compute environment with default instance type and image ID"
              platform: "google-cloud"
              credentialsId: "your-google-credentials-id"
              config:
                region: "europe-west2"
                workDir: "gs://your-bucket/work"
        
        AzureBatch:
          description: "Minimal Azure Batch Forge compute environment with Wave and Fusion enabled"
          value:
            computeEnv:
              name: "azure-batch-ce"
              description: "Minimal Azure Batch Forge compute environment with Wave and Fusion enabled"
              platform: "azure-batch"
              credentialsId: "your-azure-credentials-id"
              config:
                region: "eastus"
                workDir: "az://your-storage-account/work"
                forge:
                  vmCount: 50
                  autoScale: true
                waveEnabled: true
                fusion2Enabled: true