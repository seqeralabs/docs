overlay: "1.0.0"
info:
  title: "Compute Environment Parameters Descriptions"
  version: "2.0.0"
  description: "Comprehensive descriptions for all compute environment parameters - path, query, request body, and platform configs"

actions:
  # ===== PATH AND QUERY PARAMETERS =====
  
  # GET /compute-envs - List compute environments
  - target: "$.paths./compute-envs.get.parameters[?(@.name=='status')]"
    update:
      description: "Filter by compute environment status."
      schema:
        type: string
        enum: ["CREATING", "AVAILABLE", "ERRORED", "INVALID"]
      
  - target: "$.paths./compute-envs.get.parameters[?(@.name=='workspaceId')].description"
    update: "Workspace numeric identifier. If omitted, lists compute environments in a user context."
  
  # POST /compute-envs - Create compute environment
  - target: "$.paths./compute-envs.post.parameters[?(@.name=='workspaceId')].description"
    update: "Workspace numeric identifier. If omitted, creates compute environment in a user context."
  
  # GET /compute-envs/validate - Validate compute environment name
  - target: "$.paths./compute-envs/validate.get.parameters[?(@.name=='name')].description"
    update: "Compute environment name to validate for uniqueness and format."
      
  - target: "$.paths./compute-envs/validate.get.parameters[?(@.name=='workspaceId')].description"
    update: "Workspace numeric identifier. If omitted, validates compute environment name in a user context."
      
  - target: "$.paths./compute-envs/validate.get.parameters[?(@.name=='orgId')].description"
    update: "Organization numeric identifier. Used for organization-level compute environment name validation."
  
  # GET /compute-envs/{computeEnvId} - Describe compute environment
  - target: "$.paths./compute-envs/{computeEnvId}.get.parameters[?(@.name=='computeEnvId')].description"
    update: "Compute environment alphanumeric identifier."
      
  - target: "$.paths./compute-envs/{computeEnvId}.get.parameters[?(@.name=='workspaceId')].description"
    update: "Workspace numeric identifier."
      
  - target: "$.paths./compute-envs/{computeEnvId}.get.parameters[?(@.name=='attributes')]"
    update:
      description: "Additional attribute values to include in the response. Returns `labels: null` if omitted."
      schema:
        type: array
        items:
          type: string
          enum: ["labels"]
  
  # PUT /compute-envs/{computeEnvId} - Update compute environment
  - target: "$.paths./compute-envs/{computeEnvId}.put.parameters[?(@.name=='computeEnvId')].description"
    update: "Compute environment alphanumeric identifier."
      
  - target: "$.paths./compute-envs/{computeEnvId}.put.parameters[?(@.name=='workspaceId')].description"
    update: "Workspace numeric identifier."
  
  # DELETE /compute-envs/{computeEnvId} - Delete compute environment
  - target: "$.paths./compute-envs/{computeEnvId}.delete.parameters[?(@.name=='computeEnvId')].description"
    update: "Compute environment alphanumeric identifier."
      
  - target: "$.paths./compute-envs/{computeEnvId}.delete.parameters[?(@.name=='workspaceId')].description"
    update: "Workspace numeric identifier."
  
  # POST /compute-envs/{computeEnvId}/primary - Set primary compute environment
  - target: "$.paths./compute-envs/{computeEnvId}/primary.post.parameters[?(@.name=='computeEnvId')].description"
    update: "Compute environment alphanumeric identifier."
      
  - target: "$.paths./compute-envs/{computeEnvId}/primary.post.parameters[?(@.name=='workspaceId')].description"
    update: "Workspace numeric identifier."

  # ===== REQUEST BODY PARAMETERS - CreateComputeEnvRequest =====
  
  # CreateComputeEnvRequest - Add required fields
  - target: "$.components.schemas.CreateComputeEnvRequest"
    update:
      required: ["computeEnv"]
      
  # CreateComputeEnvRequest - Top level
  - target: "$.components.schemas.CreateComputeEnvRequest.properties.computeEnv"
    update:
      description: "Compute environment configuration object."
      
  - target: "$.components.schemas.CreateComputeEnvRequest.properties.labelIds"
    update:
      description: "Array of label IDs to assign to the compute environment."

  # ComputeEnv_ComputeConfig_ - Add required fields
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_"
    update:
      required: ["name", "platform", "config"]
      
  # ComputeEnv_ComputeConfig_ - Main compute environment fields
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.credentialsId"
    update:
      description: "Credentials identifier for compute environment authentication. Requires existing cloud provider/HPC credentials. See [Create credentials](https://docs.seqera.io/platform-api/create-credentials)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.orgId"
    update:
      description: "Organization numeric identifier (read-only, set by system)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.workspaceId"
    update:
      description: "Workspace numeric identifier (read-only, set by system)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.id"
    update:
      description: "Compute environment alphanumeric identifier (read-only, generated by system)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.name"
    update:
      description: "Unique name for the compute environment. Must consist of 1-100 alphanumeric, dash, or underscore characters."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.description"
    update:
      description: "Description of the compute environment. Maximum length: 2000 characters."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.platform"
    update:
      description: "Compute platform provider."
      enum: ["aws-batch", "aws-cloud", "google-batch", "google-cloud", "azure-batch", "k8s-platform", "eks-platform", "gke-platform", "slurm-platform", "lsf-platform", "uge-platform", "moab-platform", "altair-platform", "local-platform", "seqeracompute-platform"]
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.config"
    update:
      description: "Platform-specific configuration. Structure depends on the selected platform."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.dateCreated"
    update:
      description: "Creation timestamp (read-only, set by system)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.lastUpdated"
    update:
      description: "Last update timestamp (read-only, updated by system)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.lastUsed"
    update:
      description: "Last usage timestamp (read-only, updated by system)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.deleted"
    update:
      description: "Deletion status flag (read-only, updated by system)."
      
  - target: "$.components.schemas.ComputeEnv_ComputeConfig_.properties.status"
    update:
      description: "Current status of the compute environment (read-only)."
      enum: ["CREATING", "AVAILABLE", "ERRORED", "INVALID"]

  # UpdateComputeEnvRequest - No required fields for update
  - target: "$.components.schemas.UpdateComputeEnvRequest.properties.name"
    update:
      description: "New name for the compute environment. Must be unique within workspace."
      
  - target: "$.components.schemas.UpdateComputeEnvRequest.properties.credentialsId"
    update:
      description: "Updated credentials identifier. Changing credentials may affect running workflows."

  # ===== COMMON CONFIG FIELDS (ComputeConfig base) =====
  
  - target: "$.components.schemas.ComputeConfig.properties.workDir"
    update:
      description: "Work directory path for storing intermediate workflow files."
      
  - target: "$.components.schemas.ComputeConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.ComputeConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.ComputeConfig.properties.environment"
    update:
      description: "Environment variables to set in the compute environment."
      
  - target: "$.components.schemas.ComputeConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."
      
  - target: "$.components.schemas.ComputeConfig.properties.discriminator"
    update:
      description: "Platform type discriminator (read-only, set based on platform selection)."

  # ConfigEnvVariable
  - target: "$.components.schemas.ConfigEnvVariable"
    update:
      required: ["name", "value"]
      
  - target: "$.components.schemas.ConfigEnvVariable.properties.name"
    update:
      description: "Environment variable name."
      
  - target: "$.components.schemas.ConfigEnvVariable.properties.value"
    update:
      description: "Environment variable value."
      
  - target: "$.components.schemas.ConfigEnvVariable.properties.head"
    update:
      description: "Apply this variable to the Nextflow head job."
      
  - target: "$.components.schemas.ConfigEnvVariable.properties.compute"
    update:
      description: "Apply this variable to the Nextflow compute jobs."

  # ===== AWS BATCH CONFIG =====
  
  # Add required fields for AWS Batch
  - target: "$.components.schemas.AwsBatchConfig"
    update:
      required: ["region", "workDir"]
  
  - target: "$.components.schemas.AwsBatchConfig.properties.region"
    update:
      description: "AWS region where resources will be created (e.g., `us-east-1`)."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.computeQueue"
    update:
      description: "AWS Batch compute queue for running jobs."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.dragenQueue"
    update:
      description: "AWS Batch queue for DRAGEN workflows. See [Illumina DRAGEN](https://docs.seqera.io/platform-cloud/supported_software/dragen/overview)."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.dragenInstanceType"
    update:
      description: "EC2 instance type for DRAGEN workflows (e.g., `f1.2xlarge`)."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.computeJobRole"
    update:
      description: "Role ARN to grant fine-grained IAM permissions to Nextflow compute jobs."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.executionRole"
    update:
      description: "IAM role ARN for ECS task execution."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.headQueue"
    update:
      description: "AWS Batch queue for the Nextflow head job."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.headJobRole"
    update:
      description: "Role ARN to grant fine-grained IAM permissions to the Nextflow head job."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.cliPath"
    update:
      description: "Path to the AWS CLI installation in the container."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.volumes"
    update:
      description: "EBS volumes to mount (format: `/host/path:/container/path`)."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.nvnmeStorageEnabled"
    update:
      description: "Enable NVMe instance storage. Requires Fusion file system."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.logGroup"
    update:
      description: "CloudWatch Logs group for container logs."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.headJobCpus"
    update:
      description: "Number of CPUs allocated to the Nextflow head job."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.headJobMemoryMb"
    update:
      description: "Memory allocation for the Nextflow head job, in megabytes."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.fusionSnapshots"
    update:
      description: "Enable [Fusion Snapshots](https://docs.seqera.io/fusion/guide/snapshots). Requires Fusion file system."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.forge"
    update:
      description: "Batch Forge configuration options. [Batch Forge](https://docs.seqera.io/platform-cloud/compute-envs/aws-batch#batch-forge-compute-environment) automates the AWS Batch compute environment and job queue configuration required for deploying Nextflow pipelines."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.forgedResources"
    update:
      description: "Resources created by Batch Forge (read-only)."

  - target: "$.components.schemas.AwsBatchConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AwsBatchConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."

  # ===== AWS CLOUD CONFIG =====
  
  # Add required fields for AWS Cloud
  - target: "$.components.schemas.AwsCloudConfig"
    update:
      required: ["region", "workDir"]
  
  - target: "$.components.schemas.AwsCloudConfig.properties.region"
    update:
      description: "AWS region for EC2 instances (e.g., `us-east-1`)."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.imageId"
    update:
      description: "The AMI ID to use for launching EC2 instance. If omitted, the default [Seqera-maintained AMI](https://docs.seqera.io/platform-cloud/compute-envs/aws-cloud#managed-amazon-machine-image-ami) is used. Use Seqera AMIs for best performance."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.instanceType"
    update:
      description: "EC2 instance type (e.g., `t3.medium`). If omitted, a default instance type is used."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.vpcId"
    update:
      description: "VPC ID where instances will be launched. If omitted, the default VPC is used."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.subnets"
    update:
      description: "List of subnet IDs for instance placement. If omitted, all subnets of the VPC are used."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.securityGroups"
    update:
      description: "Security group IDs that control network access."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.ebsAutoScale"
    update:
      description: "Enable automatic EBS volume scaling."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.volumes"
    update:
      description: "Additional EBS volumes to attach."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.allowBuckets"
    update:
      description: "Comma-separated list of S3 buckets accessible to the compute environment."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.ec2KeyPair"
    update:
      description: "EC2 key pair name for SSH access to instances."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.instanceProfileArn"
    update:
      description: "The `InstanceProfile` ARN used by the EC2 instance to assume a role while running. If unspecified, Seqera will provision an ARN with enough permissions to run."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.subnetId"
    update:
      description: "Subnet ID for instance placement (single subnet)."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.arm64Enabled"
    update:
      description: "Enable ARM64 architecture (Graviton) EC2 instances to run compute jobs."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.gpuEnabled"
    update:
      description: "Enable GPU instances to run compute jobs."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.ebsBootSize"
    update:
      description: "EC2 instance boot disk size, in GB. If omitted, a 50 GB `gp3` volume is used by default."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.logGroup"
    update:
      description: "CloudWatch Logs group for container logs."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.forgedResources"
    update:
      description: "Resources created by Cloud Forge (read-only)."

  - target: "$.components.schemas.AwsCloudConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AwsCloudConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."

  # ===== GOOGLE CLOUD CONFIG =====
  
  # Add required fields for Google Cloud
  - target: "$.components.schemas.GoogleCloudConfig"
    update:
      required: ["region", "workDir"]
  
  - target: "$.components.schemas.GoogleCloudConfig.properties.region"
    update:
      description: "Google Cloud region (e.g., `us-central1`)."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.zone"
    update:
      description: "Google Cloud zone within the region (e.g., `us-central1-a`). If omitted, defaults to the first zone in the alphabetical list."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.projectId"
    update:
      description: "Google Cloud project ID."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.instanceType"
    update:
      description: "Machine type (e.g., `n1-standard-1`). If omitted, a default instance type is used."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.imageId"
    update:
      description: "ID of the image defining the operating system and pre-installed software for the VM. [Ubuntu LTS](https://cloud.google.com/compute/docs/images/os-details#ubuntu_lts) Google public images are supported. For GPU-enabled instances, a [Deep Learning VM](https://cloud.google.com/deep-learning-vm/docs/images#base_versions) base image with CUDA pre-installed is automatically selected. Optimized, Seqera-owned custom images will be available in a future release."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.bootDiskSizeGb"
    update:
      description: "Size of the boot disk for the Compute Engine instance. `pd-standard` is used. If undefined, a default 50 GB volume is used."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.serviceAccountEmail"
    update:
      description: "Service account email for IAM access to instances."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.arm64Enabled"
    update:
      description: "Enable ARM64 instances."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.gpuEnabled"
    update:
      description: "Enable GPU instances."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.forgedResources"
    update:
      description: "Resources created by Cloud Forge (read-only)."

  - target: "$.components.schemas.GoogleCloudConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.GoogleCloudConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."

  # ===== GOOGLE BATCH CONFIG =====
  
  # Add required fields for Google Batch
  - target: "$.components.schemas.GoogleBatchConfig"
    update:
      required: ["location", "workDir"]
  
  - target: "$.components.schemas.GoogleBatchConfig.properties.location"
    update:
      description: "Google Cloud location (region) for Batch jobs (e.g., `us-central1`)."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.spot"
    update:
      description: "Use Spot instances."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.projectId"
    update:
      description: "Google Cloud project ID."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.network"
    update:
      description: "VPC network name."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.subnetwork"
    update:
      description: "Subnetwork name within the VPC."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.serviceAccount"
    update:
      description: "Specify a service account email address other than the Compute Engine default to execute workflows (recommended for production environments)."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.bootDiskSizeGb"
    update:
      description: "Boot disk size in GB for compute instances."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.cpuPlatform"
    update:
      description: "Google Cloud Batch CPU platform."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.usePrivateAddress"
    update:
      description: "Use private IP addresses only (no external IPs)."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.enableRequesterPaysBuckets"
    update:
      description: "Allow access to [Requester Pays](https://cloud.google.com/storage/docs/requester-pays) Google Cloud Storage buckets."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.machineType"
    update:
      description: "Machine type for compute instances (e.g., `n1-standard-4`)."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.sshDaemon"
    update:
      description: "Enable SSH daemon for debugging."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.sshImage"
    update:
      description: "Container image for SSH daemon."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.debugMode"
    update:
      description: "Debug level (0-3) for troubleshooting."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.copyImage"
    update:
      description: "Container image for copying files."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.labels"
    update:
      description: "Comma-separated list of labels to apply to Batch resources."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.headJobCpus"
    update:
      description: "Number of CPUs allocated for the Nextflow head job."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.headJobMemoryMb"
    update:
      description: "Memory allocation for the Nextflow head job in megabytes."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.nfsTarget"
    update:
      description: "NFS server target for shared storage."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.nfsMount"
    update:
      description: "NFS mount path in containers."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.headJobInstanceTemplate"
    update:
      description: "Specify the name or fully-qualified reference of a [VM instance template](https://cloud.google.com/compute/docs/instance-templates), without the template:// prefix, to use for the Nextflow head job."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.computeJobsInstanceTemplate"
    update:
      description: "Specify the name or fully-qualified reference of a [VM instance template](https://cloud.google.com/compute/docs/instance-templates), without the template:// prefix, to use for Nextflow compute jobs."

  - target: "$.components.schemas.GoogleBatchConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.GoogleBatchConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."

  # ===== AZURE BATCH CONFIG =====
  
  # Add required fields for Azure Batch
  - target: "$.components.schemas.AzBatchConfig"
    update:
      required: ["region", "workDir"]
  
  - target: "$.components.schemas.AzBatchConfig.properties.region"
    update:
      description: "Azure region (e.g., `eastus`)."
      
  - target: "$.components.schemas.AzBatchConfig.properties.deleteJobsOnCompletion"
    update:
      description: "Automatically delete Batch jobs after completion."
      enum: ["on_success", "always", "never"]
      
  - target: "$.components.schemas.AzBatchConfig.properties.deletePoolsOnCompletion"
    update:
      description: "Automatically delete Batch pools after completion. Default: `false`."
      
  - target: "$.components.schemas.AzBatchConfig.properties.forge"
    update:
      description: "Batch Forge configuration mode properties. Batch Forge automatically creates Azure Batch resources during compute environment creation."
      
  - target: "$.components.schemas.AzBatchConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.AzBatchConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."
      
  - target: "$.components.schemas.AzBatchConfig.properties.headPool"
    update:
      description: "Batch pool for the Nextflow head job."
      
  - target: "$.components.schemas.AzBatchConfig.properties.tokenDuration"
    update:
      description: "Duration of the SAS token created by Nextflow. Default: `12h`."
      
  - target: "$.components.schemas.AzBatchConfig.properties.managedIdentityClientId"
    update:
      description: "The ID of a [managed identity client](https://docs.seqera.io/platform-cloud/compute-envs/azure-batch#managed-identity) attached to the Azure Batch Pool, used by Nextflow to authenticate to Azure Batch and Storage."

  - target: "$.components.schemas.AzBatchConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AzBatchConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AzBatchConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."

  # ===== AZURE CLOUD CONFIG =====
  
  # Add required fields for Azure Cloud  
  - target: "$.components.schemas.AzCloudConfig"
    update:
      required: ["location", "workDir"]
      
  - target: "$.components.schemas.AzCloudConfig.properties.location"
    update:
      description: "Azure location/region (e.g., `eastus`)."
      
  - target: "$.components.schemas.AzCloudConfig.properties.resourceGroup"
    update:
      description: "Azure resource group for VMs."
      
  - target: "$.components.schemas.AzCloudConfig.properties.instanceType"
    update:
      description: "Azure VM size (e.g., `Standard_D2s_v3`)."
      
  - target: "$.components.schemas.AzCloudConfig.properties.vmImage"
    update:
      description: "VM image URN or ID."
      
  - target: "$.components.schemas.AzCloudConfig.properties.networkId"
    update:
      description: "Virtual network resource ID."
      
  - target: "$.components.schemas.AzCloudConfig.properties.subscriptionId"
    update:
      description: "Azure subscription ID."
      
  - target: "$.components.schemas.AzCloudConfig.properties.managedIdentityId"
    update:
      description: "User-assigned managed identity resource ID."
      
  - target: "$.components.schemas.AzCloudConfig.properties.managedIdentityClientId"
    update:
      description: "Managed identity client ID for authentication."
      
  - target: "$.components.schemas.AzCloudConfig.properties.logWorkspaceId"
    update:
      description: "Log Analytics workspace ID for monitoring."
      
  - target: "$.components.schemas.AzCloudConfig.properties.logTableName"
    update:
      description: "Custom table name in Log Analytics."
      
  - target: "$.components.schemas.AzCloudConfig.properties.dataCollectionEndpoint"
    update:
      description: "Data collection endpoint for logs."
      
  - target: "$.components.schemas.AzCloudConfig.properties.dataCollectionRuleId"
    update:
      description: "Data collection rule ID for log routing."
      
  - target: "$.components.schemas.AzCloudConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.AzCloudConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."
      
  - target: "$.components.schemas.AzCloudConfig.properties.forgedResources"
    update:
      description: "Resources created by Cloud Forge (read-only)."

  # ===== KUBERNETES CONFIG =====
  
  # Add required fields for K8s
  - target: "$.components.schemas.K8sComputeConfig"
    update:
      required: ["server", "sslCert", "workDir"]
  
  - target: "$.components.schemas.K8sComputeConfig.properties.server"
    update:
      description: "Kubernetes control plane URL (e.g., `https://your-k8s-host.com`)."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.sslCert"
    update:
      description: "SSL certificate to authenticate the connection with the Kubernetes cluster."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.namespace"
    update:
      description: "Kubernetes namespace for workflow execution. Default: `default`."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.headServiceAccount"
    update:
      description: "Kubernetes service account to connect to the cluster and launch workflow executions. See [Cluster preparation](https://docs.seqera.io/platform-cloud/compute-envs/k8s#cluster-preparation)."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.computeServiceAccount"
    update:
      description: "Kubernetes service account to use for Nextflow-submitted pipeline jobs. Default: `default`."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.storageClaimName"
    update:
      description: "PersistentVolumeClaim name used as scratch storage for workflow execution, e.g., `tower-scratch`. Must allow `ReadWriteMany` access mode."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.storageMountPath"
    update:
      description: "Mount path of the persistent volume claim used as scratch storage. Default: `/scratch`."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.podCleanup"
    update:
      description: "Pod cleanup policy after job completion."
      enum: ["on_success", "always", "never"]
      
  - target: "$.components.schemas.K8sComputeConfig.properties.headPodSpec"
    update:
      description: "Custom configuration for the pod running the Nextflow head job, e.g., `nodeSelector` and `affinity` constraints. Must be a valid PodSpec YAML structure starting with `spec:`."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.servicePodSpec"
    update:
      description: "Custom configuration for the compute environment service pod, e.g., `nodeSelector` and `affinity` constraints. Must be a valid PodSpec YAML structure starting with `spec:`."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.headJobCpus"
    update:
      description: "Number of CPUs allocated for the Nextflow head job."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.headJobMemoryMb"
    update:
      description: "Memory allocation for the Nextflow head job in megabytes."

  - target: "$.components.schemas.K8sComputeConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.K8sComputeConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."

  # ===== EKS CONFIG =====
  
  # Add required fields for EKS
  - target: "$.components.schemas.EksComputeConfig"
    update:
      required: ["region", "clusterName", "workDir"]
  
  - target: "$.components.schemas.EksComputeConfig.properties.region"
    update:
      description: "AWS region where EKS cluster is located."
      
  - target: "$.components.schemas.EksComputeConfig.properties.clusterName"
    update:
      description: "EKS cluster name."
      
  - target: "$.components.schemas.EksComputeConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.EksComputeConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."

  # ===== GKE CONFIG =====
  
  # Add required fields for GKE
  - target: "$.components.schemas.GkeComputeConfig"
    update:
      required: ["region", "clusterName", "workDir"]
  
  - target: "$.components.schemas.GkeComputeConfig.properties.region"
    update:
      description: "Google Cloud region where GKE cluster is located."
      
  - target: "$.components.schemas.GkeComputeConfig.properties.clusterName"
    update:
      description: "GKE cluster name."
      
  - target: "$.components.schemas.GkeComputeConfig.properties.waveEnabled"
    update:
      description: "Enable [Wave containers](https://docs.seqera.io/wave)."
      
  - target: "$.components.schemas.GkeComputeConfig.properties.fusion2Enabled"
    update:
      description: "Enable [Fusion file system](https://docs.seqera.io/fusion). Requires Wave containers."

  # ===== ABSTRACT GRID CONFIG (Base for HPC platforms) =====
  
  - target: "$.components.schemas.AbstractGridConfig.properties.workDir"
    update:
      description: "Nextflow work directory on the cluster's shared file system. Must be an absolute path and credentials must have read-write access."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.preRunScript"
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.postRunScript"
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.nextflowConfig"
    update:
      description: "Additional Nextflow configuration to apply. See [Nextflow config file](https://docs.seqera.io/platform-cloud/launch/advanced#nextflow-config-file)."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.launchDir"
    update:
      description: "Directory where Nextflow runs. Must be an absolute path and credentials must have read-write access. If omitted, defaults to `workDir`."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.userName"
    update:
      description: "Username for SSH connection to HPC head node."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.hostName"
    update:
      description: "Hostname or IP address of HPC head node."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.port"
    update:
      description: "SSH port. Default: `22`."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.headQueue"
    update:
      description: "The name of the queue on the cluster used to launch the Nextflow execution."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.computeQueue"
    update:
      description: "The name of queue on the cluster to which pipeline jobs are submitted. Can be overridden by the pipeline configuration."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.maxQueueSize"
    update:
      description: "The maximum number of jobs Nextflow can submit to the queue simultaneously. Default: `100`."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.headJobOptions"
    update:
      description: "Additional submit options for the Nextflow head job."
      
  - target: "$.components.schemas.AbstractGridConfig.properties.propagateHeadJobOptions"
    update:
      description: "If true, `headJobOptions` are also applied to the Nextflow-submitted compute jobs."

  # ===== HPC CONFIGS (Slurm, LSF, UGE, Altair PBS) =====
      
  - target: "$.components.schemas.LsfComputeConfig.properties.unitForLimits"
    update:
      description: "Unit used for memory limits. Must match the LSF_UNIT_FOR_LIMITS value in `lsf.conf` file."
      enum: ["KB", "MB", "GB", "TB", "PB", "EB", "ZB"]
      
  - target: "$.components.schemas.LsfComputeConfig.properties.perJobMemLimit"
    update:
      description: "Define whether memory limit is interpreted as per-job or per-process. Must match `LSB_JOB_MEMLIMIT` in `lsf.conf` file."
      
  - target: "$.components.schemas.LsfComputeConfig.properties.perTaskReserve"
    update:
      description: "Define whether memory reservation is made on job tasks or per-host. Must match `RESOURCE_RESERVE_PER_TASK` value in `lsf.conf` file."

  # ===== SEQERA COMPUTE CONFIG =====
  
  # Add required fields for Seqera Compute
  - target: "$.components.schemas.SeqeraComputeConfig"
    update:
      required: ["region", "workDir"]
      
  - target: "$.components.schemas.SeqeraComputeConfig.properties.region"
    update:
      description: "Target execution region. See supported AWS regions [under step 4 here](https://docs.seqera.io/platform-cloud/compute-envs/seqera-compute#create-a-seqera-compute-environment)."
      
  - target: "$.components.schemas.SeqeraComputeConfig.properties.defaultDataRetentionPolicy"
    update:
      description: "If true, intermediary files are deleted after 28 days to manage storage cost/usage."

  # ===== AWS BATCH FORGE CONFIG =====
      
  - target: "$.components.schemas.ForgeConfig.properties.type"
    update:
      description: "Instance type. `EC2` deploys uninterruptible on-demand EC2 instances. `SPOT` deploys interruptible Spot instances (lower cost)."
      enum: ["SPOT", "EC2"]
      
  - target: "$.components.schemas.ForgeConfig.properties.minCpus"
    update:
      description: "Minimum CPUs provisioned in the compute environment."
      
  - target: "$.components.schemas.ForgeConfig.properties.maxCpus"
    update:
      description: "Maximum CPUs provisioned in the compute environment."
      
  - target: "$.components.schemas.ForgeConfig.properties.gpuEnabled"
    update:
      description: "Enable GPU instances."
      
  - target: "$.components.schemas.ForgeConfig.properties.ebsAutoScale"
    update:
      description: "If true, provisions an EBS auto-expandable disk in the compute environment. Not compatible with Fusion file system."
      
  - target: "$.components.schemas.ForgeConfig.properties.instanceTypes"
    update:
      description: "Comma-separated list of allowed EC2 instance types."
      
  - target: "$.components.schemas.ForgeConfig.properties.allocStrategy"
    update:
      description: "Determines how Batch selects EC2 instances to carry out job executions. Default: `BEST_FIT_PROGRESSIVE` for on-demand instances and `SPOT_PRICE_CAPACITY_OPTIMIZED` for Spot instances."
      enum: ["BEST_FIT", "BEST_FIT_PROGRESSIVE", "SPOT_CAPACITY_OPTIMIZED", "SPOT_PRICE_CAPACITY_OPTIMIZED"]
      
  - target: "$.components.schemas.ForgeConfig.properties.imageId"
    update:
      description: "Custom AMI ID to use for launching EC2 instances. Must be an AWS Linux-2 ECS-optimized image that meets the compute resource's AMI specification. If omitted, the latest approved version of the Amazon ECS-optimized AMI for compute resources is used."
      
  - target: "$.components.schemas.ForgeConfig.properties.vpcId"
    update:
      description: "VPC ID for networking."
      
  - target: "$.components.schemas.ForgeConfig.properties.subnets"
    update:
      description: "List of VPC subnets to isolate EC2 resources from each other, or the internet."
      
  - target: "$.components.schemas.ForgeConfig.properties.securityGroups"
    update:
      description: "List of security group IDs to define a set of firewall rules that control EC2 compute node traffic."
      
  - target: "$.components.schemas.ForgeConfig.properties.fsxMount"
    update:
      description: "FSx for Lustre mount point."
      
  - target: "$.components.schemas.ForgeConfig.properties.fsxName"
    update:
      description: "FSx for Lustre file system name."
      
  - target: "$.components.schemas.ForgeConfig.properties.fsxSize"
    update:
      description: "FSx for Lustre file system size in GB."
      
  - target: "$.components.schemas.ForgeConfig.properties.disposeOnDeletion"
    update:
      description: "If true, delete AWS resources when compute environment is deleted."
      
  - target: "$.components.schemas.ForgeConfig.properties.ec2KeyPair"
    update:
      description: "EC2 key pair for SSH access."
      
  - target: "$.components.schemas.ForgeConfig.properties.allowBuckets"
    update:
      description: "List of additional S3 buckets accessible to compute environment."
      
  - target: "$.components.schemas.ForgeConfig.properties.ebsBlockSize"
    update:
      description: "EBS volume size in GB."
      
  - target: "$.components.schemas.ForgeConfig.properties.fusionEnabled"
    update:
      description: "(Deprecated) Enable Fusion file system (v1)."
      
  - target: "$.components.schemas.ForgeConfig.properties.bidPercentage"
    update:
      description: "Maximum allowed price of a Spot instance, as a percentage of the on-demand price for that instance type. Spot instances will not be launched until the current spot price is below the specified cost percentage. Default: `100%`."
      
  - target: "$.components.schemas.ForgeConfig.properties.efsCreate"
    update:
      description: "If true, creates new EFS file system."
      
  - target: "$.components.schemas.ForgeConfig.properties.efsId"
    update:
      description: "Existing EFS file system ID."
      
  - target: "$.components.schemas.ForgeConfig.properties.efsMount"
    update:
      description: "EFS file system mount point in containers."
      
  - target: "$.components.schemas.ForgeConfig.properties.dragenEnabled"
    update:
      description: "Enable [DRAGEN](https://docs.seqera.io/platform-cloud/supported_software/dragen/overview) support."
      
  - target: "$.components.schemas.ForgeConfig.properties.dragenAmiId"
    update:
      description: "AMI ID for [DRAGEN](https://docs.seqera.io/platform-cloud/supported_software/dragen/overview) instances."
      
  - target: "$.components.schemas.ForgeConfig.properties.ebsBootSize"
    update:
      description: "Boot disk size for instances, in GB."
      
  - target: "$.components.schemas.ForgeConfig.properties.ecsConfig"
    update:
      description: "Custom configuration for the ECS agent parameters used by AWS Batch. Appended to the `/etc/ecs/ecs.config` file in each cluster node. Altering this file may result in a malfunctioning Batch Forge compute environment. See [ECS agent configuration](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-agent-config.html)."
      
  - target: "$.components.schemas.ForgeConfig.properties.fargateHeadEnabled"
    update:
      description: "Run Nextflow head job on Fargate container service. Requires Fusion file system and Spot instance provisioning model. Fargate is not compatible with EFS and FSx file systems."
      
  - target: "$.components.schemas.ForgeConfig.properties.arm64Enabled"
    update:
      description: "Enable ARM64 (Graviton) instances. Requires Fargate, Wave containers, and Fusion file system."
      
  - target: "$.components.schemas.ForgeConfig.properties.dragenInstanceType"
    update:
      description: "Instance type for DRAGEN workflows."

  # ===== AZURE BATCH FORGE CONFIG =====
  
  - target: "$.components.schemas.AzBatchForgeConfig.properties.vmType"
    update:
      description: "Azure VM type used by the Batch pool. Must be a valid Azure Batch VM type. Default: `Standard_D4s_v3`."
      
  - target: "$.components.schemas.AzBatchForgeConfig.properties.vmCount"
    update:
      description: "Number of VMs in the Batch pool. When autoscaling is enabled, this represents the maximum number of VMs to which the pool can grow, and automatically scales to 0 when unused."
      
  - target: "$.components.schemas.AzBatchForgeConfig.properties.autoScale"
    update:
      description: "Enable auto-scaling for the Batch pool."
      
  - target: "$.components.schemas.AzBatchForgeConfig.properties.disposeOnDeletion"
    update:
      description: "Delete Batch compute pool when the compute environment is deleted."
      
  - target: "$.components.schemas.AzBatchForgeConfig.properties.containerRegIds"
    update:
      description: "Container registry resource IDs."